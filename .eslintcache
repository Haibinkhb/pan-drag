[{"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\index.tsx":"1","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\layout\\ToolBar.tsx":"2","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\layout\\DraggableComponentList.tsx":"3","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\App.tsx":"4","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\layout\\Attributes.tsx":"5","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\layout\\Edit.tsx":"6","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\reportWebVitals.ts":"7","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\Components\\Button\\button.tsx":"8","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\hooks\\useComponentDataReducer.ts":"9","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\Components\\Button\\index.tsx":"10","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Button\\button.tsx":"11","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Button\\index.tsx":"12","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Icon\\icon.tsx":"13","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Icon\\index.tsx":"14","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Editor\\editWrapper.tsx":"15","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\hooks\\useThrottle.ts":"16","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Text\\text.tsx":"17","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\index.ts":"18","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Text\\index.tsx":"19","C:\\Users\\admin\\Desktop\\pan-drag\\src\\index.tsx":"20","C:\\Users\\admin\\Desktop\\pan-drag\\src\\layout\\DraggableComponentList.tsx":"21"},{"size":529,"mtime":1611733079820,"results":"22","hashOfConfig":"23"},{"size":280,"mtime":1611636907432,"results":"24","hashOfConfig":"23"},{"size":2126,"mtime":1612410502019,"results":"25","hashOfConfig":"23"},{"size":868,"mtime":1611812242635,"results":"26","hashOfConfig":"23"},{"size":413,"mtime":1611721360026,"results":"27","hashOfConfig":"23"},{"size":2501,"mtime":1612592549511,"results":"28","hashOfConfig":"23"},{"size":425,"mtime":1609919021092,"results":"29","hashOfConfig":"23"},{"size":1282,"mtime":1611733652814,"results":"30","hashOfConfig":"23"},{"size":1999,"mtime":1612589639556,"results":"31","hashOfConfig":"23"},{"size":56,"mtime":1610861169890,"results":"32","hashOfConfig":"23"},{"size":1282,"mtime":1611890161884,"results":"33","hashOfConfig":"23"},{"size":56,"mtime":1611890252571,"results":"34","hashOfConfig":"23"},{"size":828,"mtime":1611731074544,"results":"35","hashOfConfig":"23"},{"size":50,"mtime":1610861408700,"results":"36","hashOfConfig":"23"},{"size":7494,"mtime":1612594923897,"results":"37","hashOfConfig":"23"},{"size":692,"mtime":1612087517852,"results":"38","hashOfConfig":"23"},{"size":227,"mtime":1612239219187,"results":"39","hashOfConfig":"23"},{"size":86,"mtime":1611893539977,"results":"40","hashOfConfig":"23"},{"size":52,"mtime":1612091229381,"results":"41","hashOfConfig":"23"},{"size":529,"mtime":1611733079820,"results":"42","hashOfConfig":"43"},{"size":2126,"mtime":1612410502019,"results":"44","hashOfConfig":"43"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},"eidk0i",{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"xjqj4z",{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\index.tsx",[],["92","93"],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\layout\\ToolBar.tsx",[],["94","95"],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\layout\\DraggableComponentList.tsx",[],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\App.tsx",[],["96","97"],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\layout\\Attributes.tsx",[],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\layout\\Edit.tsx",["98"],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\reportWebVitals.ts",[],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\Components\\Button\\button.tsx",[],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\hooks\\useComponentDataReducer.ts",[],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\Components\\Button\\index.tsx",[],["99","100"],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Button\\button.tsx",[],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Button\\index.tsx",[],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Icon\\icon.tsx",[],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Icon\\index.tsx",[],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Editor\\editWrapper.tsx",["101"],"import React, {\r\n  FC,\r\n  Dispatch,\r\n  useCallback,\r\n  useEffect,\r\n  useState,\r\n  CSSProperties,\r\n} from \"react\";\r\nimport {\r\n  ComponentItemDataProps,\r\n  ComponentDispatchProps,\r\n} from \"../../types/component\";\r\nimport Button from \"../../components/Button\";\r\nimport Text from \"../../components/Text\";\r\nconst components = {\r\n  button: Button,\r\n  text: Text,\r\n};\r\n\r\nexport type pointTtype = \"lt\" | \"t\" | \"rt\" | \"r\" | \"rb\" | \"b\" | \"lb\" | \"l\";\r\n\r\nexport interface EditWrapperProps {\r\n  component: ComponentItemDataProps;\r\n  dispatch: Dispatch<ComponentDispatchProps>;\r\n}\r\n\r\nconst EditWrapper: FC<EditWrapperProps> = (props) => {\r\n  const { component, dispatch } = props;\r\n  const [isMouseDown, setIsMouseDown] = useState(false);\r\n  // const [isPointMouseDown, setisPointMouseDown] = useState(false);\r\n  const [mouseStartPos, setMouseStartPos] = useState({ x: 0, y: 0 });\r\n  const TargetComponent = components[component.name];\r\n  const pointList: pointTtype[] = [\"lt\", \"t\", \"rt\", \"r\", \"rb\", \"b\", \"lb\", \"l\"];\r\n  const handlePointMouseDown = useCallback(\r\n    (event: React.MouseEvent, point: pointTtype) => {\r\n      event.stopPropagation();\r\n      event.preventDefault();\r\n      const { style } = component;\r\n      const height = Number(style!.height);\r\n      const width = Number(style!.width);\r\n      const top = Number(style!.top);\r\n      const left = Number(style!.left);\r\n      const startX = event.clientX;\r\n      const startY = event.clientY;\r\n      // 是否需要保存快照\r\n      // let needSave: boolean = false;\r\n      const handlePointMouseMove = (event: MouseEvent) => {\r\n        event.stopPropagation();\r\n        // needSave = true;\r\n        const { clientX, clientY } = event;\r\n        const disY = clientY - startY;\r\n        const disX = clientX - startX;\r\n        const hasT = /t/.test(point);\r\n        const hasL = /l/.test(point);\r\n        const newHeight = height + (hasT ? -disY : disY);\r\n        const newWidth = width + (hasL ? -disX : disX);\r\n        const style = component.style!;\r\n        style.height = newHeight > 0 ? newHeight : 0;\r\n        style.width = newWidth > 0 ? newWidth : 0;\r\n        style.left = left + (hasL ? disX : 0);\r\n        style.top = top + (hasT ? disY : 0);\r\n        dispatch({\r\n          type: \"modifyComponentById\",\r\n          data: { ...component, style },\r\n        });\r\n      };\r\n\r\n      const handlePointMouseUp = (event: MouseEvent) => {\r\n        event.stopPropagation();\r\n        document.removeEventListener(\"mousemove\", handlePointMouseMove);\r\n        document.removeEventListener(\"mouseup\", handlePointMouseUp);\r\n      };\r\n      document.addEventListener(\"mousemove\", handlePointMouseMove);\r\n      document.addEventListener(\"mouseup\", handlePointMouseUp);\r\n    },\r\n    [component, dispatch]\r\n  );\r\n\r\n  const handleMouseDown = useCallback(\r\n    (event: React.MouseEvent) => {\r\n      event.stopPropagation();\r\n      setIsMouseDown(true);\r\n      /* 记录鼠标初始位置 */\r\n      const { clientX, clientY } = event;\r\n      setMouseStartPos({ x: clientX, y: clientY });\r\n      /* 设置选中 */\r\n      dispatch({\r\n        type: \"handleSelect\",\r\n        data: component,\r\n      });\r\n    },\r\n    [component, dispatch]\r\n  );\r\n\r\n  const handleMouseMove = useCallback(\r\n    (event: MouseEvent) => {\r\n      event.stopPropagation();\r\n      if (!isMouseDown) return;\r\n      /* 根据鼠标初始位置计算出鼠标移动距离并更新对应元素属性 */\r\n      const { clientX, clientY } = event;\r\n      const { x, y } = mouseStartPos;\r\n      const moveX = clientX - x; // 鼠标横向移动的距离\r\n      const moveY = clientY - y; // 鼠标纵向移动的距离\r\n      let { left, top } = component.style!;\r\n      left = moveX + Number(left);\r\n      top = moveY + Number(top);\r\n      const style = { ...component.style, left, top };\r\n      dispatch({\r\n        type: \"modifyComponentById\",\r\n        data: { ...component, style },\r\n      });\r\n    },\r\n    [isMouseDown, mouseStartPos, dispatch] // 不能将 component 加入依赖，否则会不符合预期\r\n  );\r\n  const handleMouseUp = useCallback((event: MouseEvent) => {\r\n    event.stopPropagation();\r\n    setIsMouseDown(false);\r\n    /* 初始化鼠标位置 */\r\n    setMouseStartPos({ x: 0, y: 0 });\r\n  }, []);\r\n\r\n  const getPointStyle = useCallback(\r\n    (point: pointTtype) => {\r\n      const { width, height } = component.style!;\r\n      const postion: CSSProperties = {};\r\n      switch (point) {\r\n        case \"lt\":\r\n          postion.left = 0;\r\n          postion.top = 0;\r\n          postion.cursor = \"nw-resize\";\r\n          postion.transform = \"translate(-50%, -50%)\";\r\n          break;\r\n        case \"t\":\r\n          postion.left = Number(width) / 2;\r\n          postion.top = 0;\r\n          postion.cursor = \"n-resize\";\r\n          postion.transform = \"translate(-50%, -50%)\";\r\n          break;\r\n        case \"rt\":\r\n          postion.right = 0;\r\n          postion.top = 0;\r\n          postion.cursor = \"ne-resize\";\r\n          postion.transform = \"translate(50%, -50%)\";\r\n          break;\r\n        case \"r\":\r\n          postion.right = 0;\r\n          postion.top = Number(height) / 2;\r\n          postion.cursor = \"w-resize\";\r\n          postion.transform = \"translate(50%, -50%)\";\r\n          break;\r\n        case \"rb\":\r\n          postion.right = 0;\r\n          postion.bottom = 0;\r\n          postion.cursor = \"se-resize\";\r\n          postion.transform = \"translate(50%, 50%)\";\r\n          break;\r\n        case \"b\":\r\n          postion.left = Number(width) / 2;\r\n          postion.bottom = 0;\r\n          postion.cursor = \"n-resize\";\r\n          postion.transform = \"translate(-50%, 50%)\";\r\n          break;\r\n        case \"lb\":\r\n          postion.left = 0;\r\n          postion.bottom = 0;\r\n          postion.cursor = \"sw-resize\";\r\n          postion.transform = \"translate(-50%, 50%)\";\r\n          break;\r\n        case \"l\":\r\n          postion.right = 0;\r\n          postion.left = 0;\r\n          postion.top = Number(height) / 2;\r\n          postion.cursor = \"w-resize\";\r\n          postion.transform = \"translate(-50%, -50%)\";\r\n          break;\r\n      }\r\n      const pointStyle: CSSProperties = {\r\n        ...postion,\r\n        position: \"absolute\",\r\n        width: \"10px\",\r\n        height: \"10px\",\r\n        border: \"1px solid #fd7e14\",\r\n        borderRadius: \"50%\",\r\n        backgroundColor: \"#fff\",\r\n      };\r\n      return pointStyle;\r\n    },\r\n    [component]\r\n  );\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"mousemove\", handleMouseMove);\r\n    document.addEventListener(\"mouseup\", handleMouseUp);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousemove\", handleMouseMove);\r\n      document.removeEventListener(\"mouseup\", handleMouseUp);\r\n    };\r\n  }, [handleMouseMove, handleMouseUp]);\r\n\r\n  const shapeStyle = {\r\n    ...component.style,\r\n    border: \"1px solid #fd7e14\",\r\n  };\r\n\r\n  const targetComponentProps = JSON.parse(JSON.stringify(component));\r\n  const targetComponentStyle: CSSProperties = {};\r\n  targetComponentProps.style = targetComponentStyle;\r\n  return (\r\n    <div style={shapeStyle} onMouseDown={handleMouseDown}>\r\n      <TargetComponent {...targetComponentProps} />\r\n\r\n      {component.isselected\r\n        ? pointList.map((point, index) => {\r\n            return (\r\n              <div\r\n                onMouseDown={(event) => handlePointMouseDown(event, point)}\r\n                key={index}\r\n                style={getPointStyle(point)}\r\n              ></div>\r\n            );\r\n          })\r\n        : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditWrapper;\r\n","C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\hooks\\useThrottle.ts",["102","103"],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Text\\text.tsx",[],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\index.ts",[],"C:\\Users\\admin\\Desktop\\learing\\pan-drag\\src\\components\\Text\\index.tsx",[],"C:\\Users\\admin\\Desktop\\pan-drag\\src\\index.tsx",[],"C:\\Users\\admin\\Desktop\\pan-drag\\src\\layout\\DraggableComponentList.tsx",[],{"ruleId":"104","replacedBy":"105"},{"ruleId":"106","replacedBy":"107"},{"ruleId":"104","replacedBy":"108"},{"ruleId":"106","replacedBy":"109"},{"ruleId":"104","replacedBy":"110"},{"ruleId":"106","replacedBy":"111"},{"ruleId":"112","severity":1,"message":"113","line":2,"column":56,"nodeType":"114","messageId":"115","endLine":2,"endColumn":64},{"ruleId":"104","replacedBy":"116"},{"ruleId":"106","replacedBy":"117"},{"ruleId":"118","severity":1,"message":"119","line":113,"column":5,"nodeType":"120","endLine":113,"endColumn":43,"suggestions":"121"},{"ruleId":"118","severity":1,"message":"122","line":29,"column":5,"nodeType":"114","endLine":29,"endColumn":8},{"ruleId":"118","severity":1,"message":"123","line":29,"column":5,"nodeType":"114","endLine":29,"endColumn":8,"suggestions":"124"},"no-native-reassign",["125"],"no-negated-in-lhs",["126"],["125"],["126"],["125"],["126"],"@typescript-eslint/no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar",["125"],["126"],"react-hooks/exhaustive-deps","React Hook useCallback has a missing dependency: 'component'. Either include it or remove the dependency array.","ArrayExpression",["127"],"React Hook useCallback was passed a dependency list that is not an array literal. This means we can't statically verify whether you've passed the correct dependencies.","React Hook useCallback has missing dependencies: 'current' and 'delay'. Either include them or remove the dependency array.",["128"],"no-global-assign","no-unsafe-negation",{"desc":"129","fix":"130"},{"desc":"131","fix":"132"},"Update the dependencies array to be: [isMouseDown, mouseStartPos, component, dispatch]",{"range":"133","text":"134"},"Update the dependencies array to be: [current, delay]",{"range":"135","text":"136"},[3784,3822],"[isMouseDown, mouseStartPos, component, dispatch]",[646,649],"[current, delay]"]